<html style="height: 100%; margin: 0; padding: 0;">
  <body style="margin: 0; padding: 0; background: linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)), url('/assets/image.jpg') no-repeat center center fixed; background-size: cover;">
    <div style="min-height: 100vh; display: flex; flex-direction: column;">
      <div class="container mt-4">
  <section class="mb-4 text-center heading-section">
    <h3><br>Swap Shift Management</h3>
    <p class="text-muted">Request and manage shift swaps with ease across your team.</p>
  </section>

  <!-- Create Swap Shift Request Section -->
  <div class="card p-4 mb-4">
    <h5 class="mb-3">Create Swap Shift Request</h5>
    <form (ngSubmit)="submitSwapShiftRequest()" #swapForm="ngForm" class="form-grid">
      <div class="form-group">
        <input type="number" [(ngModel)]="newSwapRequest.fromShiftID" name="fromShiftID" class="form-control" required />
        <label>From Shift ID</label>
      </div>
      <div class="form-group">
        <input type="text" [(ngModel)]="newSwapRequest.reason" name="reason" class="form-control" required />
        <label>Reason</label>
      </div>
      <button type="submit" class="btn btn-primary" [disabled]="swapForm.invalid">Request Swap</button>
    </form>
  </div>

  <!-- My Swap Shift Requests Section -->
  <div class="card p-4 mb-4">
    <h5 class="mb-3">My Swap Shift Requests</h5>
    <div class="table-responsive">
      <table class="table table-striped table-bordered">
        <thead class="thead-dark">
          <tr>
            <th>ID</th>
            <th>From Shift</th>
            <th>Reason</th>
            <th>Status</th>
            <th *ngIf="isAdmin">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let req of mySwapShiftRequests">
            <td>{{ req.swapShiftRequestID }}</td>
            <td>{{ req.fromShiftID }}</td>
            <td>{{ req.reason }}</td>
            <td>{{ req.status }}</td>
            <td *ngIf="isAdmin">
              <button class="btn btn-sm btn-info button-spacing" (click)="startUpdate(req)">Edit</button>
              <button class="btn btn-sm btn-danger" (click)="deleteRequest(req.swapShiftRequestID)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- All Swap Shift Requests Section -->
  <div *ngIf="isAdmin || isManager" class="card p-4 mb-4">
    <h5 class="mb-3">All Swap Shift Requests</h5>
    <div class="table-responsive">
      <table class="table table-striped table-bordered">
        <thead class="thead-dark">
          <tr>
            <th>ID</th>
            <th>Requesting Employee ID</th>
            <th>From Shift</th>
            <th>Reason</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let req of swapShiftRequests">
            <td>{{ req.swapShiftRequestID }}</td>
            <td>{{ req.requestingEmployeeID }}</td>
            <td>{{ req.fromShiftID }}</td>
            <td>{{ req.reason }}</td>
            <td>{{ req.status }}</td>
            <td>
              <button class="btn btn-sm btn-info mr-2" (click)="startUpdate(req)">Edit</button>
              <button class="btn btn-sm btn-danger" (click)="deleteRequest(req.swapShiftRequestID)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Edit Swap Shift Request Modal -->
  <div *ngIf="selectedRequestId" class="modal-overlay">
    <div class="modal-content">
      <h5 class="mb-3">Edit Swap Shift Request</h5>
      <form (ngSubmit)="submitUpdate()" #editForm="ngForm" class="form-grid">
        <div class="form-group">
          <input type="number" [(ngModel)]="updateRequest.fromShiftID" name="editFromShiftID" class="form-control" required />
          <label>From Shift ID</label>
        </div>
        <div class="form-group">
          <input type="text" [(ngModel)]="updateRequest.reason" name="editReason" class="form-control" required />
          <label>Reason</label>
        </div>
        <div class="form-group">
          <select *ngIf="isAdmin" [(ngModel)]="updateRequest.status" name="editStatus" class="form-control" required>
            <option *ngFor="let option of statusOptions" [value]="option">{{ option }}</option>
          </select>
          <input *ngIf="!isAdmin" type="text" [(ngModel)]="updateRequest.status" name="editStatus" class="form-control" readonly />
          <label>Status</label>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-success" [disabled]="editForm.invalid">Save</button>
          <button type="button" class="btn btn-secondary" (click)="selectedRequestId = null">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Success Modal -->
  <div *ngIf="showSuccessModal" class="modal-overlay">
    <div class="modal-content">
      <h5 class="mb-3">{{ successMessage }}</h5>
      <button class="btn btn-success" (click)="closeSuccessModal()">OK</button>
    </div>
  </div>

  <!-- Error Modal -->
  <div *ngIf="showErrorModal" class="modal-overlay">
    <div class="modal-content">
      <h5 class="mb-3 text-danger">{{ errorMessage }}</h5>
      <button class="btn btn-danger" (click)="closeErrorModal()">OK</button>
    </div>
  </div>
</div>